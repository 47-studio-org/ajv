(window.webpackJsonp=window.webpackJsonp||[]).push([[49],{510:function(t,a,s){"use strict";s.r(a);var e=s(53),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"json-type-definition"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#json-type-definition"}},[t._v("#")]),t._v(" JSON Type Definition")]),t._v(" "),s("p",[t._v("This document informally describes JSON Type Definition (JTD) specification to help Ajv users to start using it. For formal definition please refer to "),s("a",{attrs:{href:"https://datatracker.ietf.org/doc/rfc8927/",target:"_blank",rel:"noopener noreferrer"}},[t._v("RFC8927"),s("OutboundLink")],1),t._v(". Please report any contradictions in this document with the specification.")]),t._v(" "),s("p",[t._v("To use JTD schemas you need to import a different Ajv class:")]),t._v(" "),s("code-group",[s("code-block",{attrs:{title:"JavaScript"}},[s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Ajv "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ajv/dist/jtd"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ajv "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ajv")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])]),t._v(" "),s("code-block",{attrs:{title:"TypeScript"}},[s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" Ajv "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ajv/dist/jtd"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" ajv "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Ajv")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])])],1),t._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#jtd-schema-forms"}},[t._v("JTD schema forms")]),s("ul",[s("li",[s("a",{attrs:{href:"#type-form"}},[t._v("Type form "),s("Badge",{attrs:{text:"primitive values"}})],1)]),s("li",[s("a",{attrs:{href:"#enum-form"}},[t._v("Enum form")])]),s("li",[s("a",{attrs:{href:"#elements-form"}},[t._v("Elements form "),s("Badge",{attrs:{text:"arrays"}})],1)]),s("li",[s("a",{attrs:{href:"#properties-form"}},[t._v("Properties form "),s("Badge",{attrs:{text:"objects"}})],1)]),s("li",[s("a",{attrs:{href:"#discriminator-form"}},[t._v("Discriminator form "),s("Badge",{attrs:{text:"tagged union"}})],1)]),s("li",[s("a",{attrs:{href:"#values-form"}},[t._v("Values form "),s("Badge",{attrs:{text:"dictionary"}})],1)]),s("li",[s("a",{attrs:{href:"#ref-form"}},[t._v("Ref form "),s("Badge",{attrs:{text:"reference definitions"}})],1)]),s("li",[s("a",{attrs:{href:"#empty-form"}},[t._v("Empty form "),s("Badge",{attrs:{text:"any data"}})],1)])])]),s("li",[s("a",{attrs:{href:"#jtdschematype"}},[t._v("JTDSchemaType")]),s("ul",[s("li",[s("a",{attrs:{href:"#most-schemas"}},[t._v("Most Schemas")])]),s("li",[s("a",{attrs:{href:"#ref-schemas"}},[t._v("Ref Schemas")])]),s("li",[s("a",{attrs:{href:"#notable-omissions"}},[t._v("Notable Omissions")])])])]),s("li",[s("a",{attrs:{href:"#extending-jtd"}},[t._v("Extending JTD")]),s("ul",[s("li",[s("a",{attrs:{href:"#metadata-schema-member"}},[t._v("Metadata schema member")])]),s("li",[s("a",{attrs:{href:"#union-keyword"}},[t._v("Union keyword")])]),s("li",[s("a",{attrs:{href:"#user-defined-keywords"}},[t._v("User-defined keywords")])])])]),s("li",[s("a",{attrs:{href:"#validation-errors"}},[t._v("Validation errors")])])])]),s("p"),t._v(" "),s("h2",{attrs:{id:"jtd-schema-forms"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jtd-schema-forms"}},[t._v("#")]),t._v(" JTD schema forms")]),t._v(" "),s("p",[t._v("JTD specification defines 8 different forms that the schema for JSON can take for one of most widely used data types in JSON messages (API requests and responses).")]),t._v(" "),s("p",[t._v("All forms require that:")]),t._v(" "),s("ul",[s("li",[t._v("schema is an object with different members, depending on the form")]),t._v(" "),s("li",[t._v("each form can have:\n"),s("ul",[s("li",[t._v("an optional member "),s("code",[t._v("nullable")]),t._v(" with a boolean value that allows data instance to be JSON "),s("code",[t._v("null")]),t._v(".")]),t._v(" "),s("li",[t._v("an optional member "),s("code",[t._v("metadata")]),t._v(' with an object value that allows to pass any additional information or extend the specification (Ajv defines keyword "union" that can be used inside '),s("code",[t._v("metadata")]),t._v(")")])])])]),t._v(" "),s("p",[t._v("Root schema can have member "),s("code",[t._v("definitions")]),t._v(" that has a dictionary of schemas that can be references from any other schemas using form "),s("code",[t._v("ref")])]),t._v(" "),s("h3",{attrs:{id:"type-form"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#type-form"}},[t._v("#")]),t._v(" Type form "),s("Badge",{attrs:{text:"primitive values"}})],1),t._v(" "),s("p",[t._v("This form defines a primitive value.")]),t._v(" "),s("p",[t._v("It has a required member "),s("code",[t._v("type")]),t._v(" and an optional members "),s("code",[t._v("nullable")]),t._v(" and "),s("code",[t._v("metadata")]),t._v(", no other members are allowed.")]),t._v(" "),s("p",[s("code",[t._v("type")]),t._v(" can have one of the following values:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v('"string"')]),t._v(" - defines a string")]),t._v(" "),s("li",[s("code",[t._v('"boolean"')]),t._v(" - defines boolean value "),s("code",[t._v("true")]),t._v(" or "),s("code",[t._v("false")])]),t._v(" "),s("li",[s("code",[t._v('"timestamp"')]),t._v(" - defines timestamp ( accepting either an "),s("a",{attrs:{href:"https://datatracker.ietf.org/doc/rfc3339/",target:"_blank",rel:"noopener noreferrer"}},[t._v("RFC3339"),s("OutboundLink")],1),t._v(" JSON string or a Date object, configurable via the "),s("code",[t._v("timestamp")]),t._v(" Ajv option)")]),t._v(" "),s("li",[s("code",[t._v("type")]),t._v(" values that define integer numbers:\n"),s("ul",[s("li",[s("code",[t._v('"int8"')]),t._v(" - signed byte value (-128 .. 127)")]),t._v(" "),s("li",[s("code",[t._v('"uint8"')]),t._v(" - unsigned byte value (0 .. 255)")]),t._v(" "),s("li",[s("code",[t._v('"int16"')]),t._v(" - signed word value (-32768 .. 32767),")]),t._v(" "),s("li",[s("code",[t._v('"uint16"')]),t._v(" - unsigned word value (0 .. 65535)")]),t._v(" "),s("li",[s("code",[t._v('"int32"')]),t._v(" - signed 32-bit integer value")]),t._v(" "),s("li",[s("code",[t._v('"uint32"')]),t._v(" - unsigned 32-bit integer value")])])]),t._v(" "),s("li",[s("code",[t._v("type")]),t._v(" values that define floating point numbers:\n"),s("ul",[s("li",[s("code",[t._v('"float32"')]),t._v(" - 32-bit real number")]),t._v(" "),s("li",[s("code",[t._v('"float64"')]),t._v(" - 64-bit real number")])])])]),t._v(" "),s("p",[t._v("Unlike JSON Schema, JTD does not allow defining values that can take one of several types, but they can be defined as "),s("code",[t._v("nullable")]),t._v(".")]),t._v(" "),s("p",[s("strong",[t._v("Example")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"enum-form"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#enum-form"}},[t._v("#")]),t._v(" Enum form")]),t._v(" "),s("p",[t._v("This form defines a string that can take one of the values from the list (the values in the list must be unique).")]),t._v(" "),s("p",[t._v("It has a required member "),s("code",[t._v("enum")]),t._v(" and optional members "),s("code",[t._v("nullable")]),t._v(" and "),s("code",[t._v("metadata")]),t._v(", no other members are allowed.")]),t._v(" "),s("p",[t._v("Unlike JSON Schema, JTD does not allow defining "),s("code",[t._v("enum")]),t._v(" with values of any other type than string.")]),t._v(" "),s("p",[s("strong",[t._v("Example")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"foo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bar"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"elements-form"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#elements-form"}},[t._v("#")]),t._v(" Elements form "),s("Badge",{attrs:{text:"arrays"}})],1),t._v(" "),s("p",[t._v("This form defines a homogenous array of any size (possibly empty) with the elements that satisfy a given schema.")]),t._v(" "),s("p",[t._v("It has a required member "),s("code",[t._v("elements")]),t._v(" (schema that elements should satisfy) and optional members "),s("code",[t._v("nullable")]),t._v(" and "),s("code",[t._v("metadata")]),t._v(", no other members are allowed.")]),t._v(" "),s("p",[t._v("Unlike JSON Schema, the data instance must be JSON array (without using additional "),s("code",[t._v("type")]),t._v(" keyword), and there is no way to enforce the restrictions that cannot be present on type level of most languages, such as array size and uniqueness of items.")]),t._v(" "),s("p",[s("strong",[t._v("Example")])]),t._v(" "),s("p",[t._v("Schema:")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  elements"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("Valid data: "),s("code",[t._v("[]")]),t._v(", "),s("code",[t._v('["foo"]')]),t._v(", "),s("code",[t._v('["foo", "bar"]')])]),t._v(" "),s("p",[t._v("Invalid data: "),s("code",[t._v('["foo", 1]')]),t._v(", any type other than array")]),t._v(" "),s("h3",{attrs:{id:"properties-form"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#properties-form"}},[t._v("#")]),t._v(" Properties form "),s("Badge",{attrs:{text:"objects"}})],1),t._v(" "),s("p",[t._v("This form defines record (JSON object) that has defined required and optional properties.")]),t._v(" "),s("p",[t._v("It is required that this form has either "),s("code",[t._v("properties")]),t._v(" member, or "),s("code",[t._v("optionalProperties")]),t._v(", or both, in which case the cannot have overlapping properties. Additional properties can be allowed by adding an optional boolean member "),s("code",[t._v("additionalProperties")]),t._v(" with a value "),s("code",[t._v("true")]),t._v(". This form, as all other, can have optional "),s("code",[t._v("nullable")]),t._v(" and "),s("code",[t._v("metadata")]),t._v(" members.")]),t._v(" "),s("p",[t._v("Unlike JSON Schema, all properties defined in "),s("code",[t._v("properties")]),t._v(" schema member are required, the data instance must be JSON object (without using additional "),s("code",[t._v("type")]),t._v(" keyword) and by default additional properties are not allowed (with the exception of discriminator tag - see the next section). This strictness minimises user mistakes.")]),t._v(" "),s("p",[s("strong",[t._v("Example 1.")])]),t._v(" "),s("p",[t._v("Schema:")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  properties"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    foo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("Valid data: "),s("code",[t._v('{foo: "bar"}')])]),t._v(" "),s("p",[t._v("Invalid data: "),s("code",[t._v("{}")]),t._v(", "),s("code",[t._v("{foo: 1}")]),t._v(", "),s("code",[t._v('{foo: "bar", bar: 1}')]),t._v(", any type other than object")]),t._v(" "),s("p",[s("strong",[t._v("Example 2.")])]),t._v(" "),s("p",[t._v("Schema:")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  properties"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    foo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  optionalProperties"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    bar"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  additionalProperties"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("Valid data: "),s("code",[t._v('{foo: "bar"}')]),t._v(", "),s("code",[t._v('{foo: "bar", bar: "1"}')]),t._v(", "),s("code",[t._v('{foo: "bar", additional: 1}')])]),t._v(" "),s("p",[t._v("Invalid data: "),s("code",[t._v("{}")]),t._v(", "),s("code",[t._v("{foo: 1}")]),t._v(", "),s("code",[t._v('{foo: "bar", bar: "3"}')]),t._v(", any type other than object")]),t._v(" "),s("p",[s("strong",[t._v("Example 3: invalid schema (overlapping required and optional properties)")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  properties"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    foo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  optionalProperties"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    foo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"discriminator-form"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#discriminator-form"}},[t._v("#")]),t._v(" Discriminator form "),s("Badge",{attrs:{text:"tagged union"}})],1),t._v(" "),s("p",[t._v("This form defines discriminated (tagged) union of different record types.")]),t._v(" "),s("p",[t._v("It has required members "),s("code",[t._v("discriminator")]),t._v(" and "),s("code",[t._v("mapping")]),t._v(" and optional members "),s("code",[t._v("nullable")]),t._v(" and "),s("code",[t._v("metadata")]),t._v(", no other members are allowed.")]),t._v(" "),s("p",[t._v("The string value of "),s("code",[t._v("discriminator")]),t._v(" schema member contains the name of the data member that is the tag of the union. "),s("code",[t._v("mapping")]),t._v(" schema member contains the dictionary of schemas that are applied according to the value of the tag member in the data. Schemas inside "),s("code",[t._v("mapping")]),t._v(' must have "properties" form.')]),t._v(" "),s("p",[t._v("Properties forms inside "),s("code",[t._v("mapping")]),t._v(" cannot be "),s("code",[t._v("nullable")]),t._v(" and cannot define the same property as discriminator tag.")]),t._v(" "),s("p",[s("strong",[t._v("Example 1.")])]),t._v(" "),s("p",[t._v("Schema:")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  discriminator"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"version"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  mapping"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      properties"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        foo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      properties"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        foo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uint8"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("Valid data: "),s("code",[t._v('{version: "1", foo: "1"}')]),t._v(", "),s("code",[t._v('{version: "2", foo: 1}')])]),t._v(" "),s("p",[t._v("Invalid data: "),s("code",[t._v("{}")]),t._v(", "),s("code",[t._v('{foo: "1"}')]),t._v(", "),s("code",[t._v('{version: 1, foo: "1"}')]),t._v(", any type other than object")]),t._v(" "),s("p",[s("strong",[t._v("Example 3: invalid schema (discriminator tag member defined in mapping)")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  discriminator"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"version"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  mapping"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      properties"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"1"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        foo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      properties"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        version"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        foo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uint8"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"values-form"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#values-form"}},[t._v("#")]),t._v(" Values form "),s("Badge",{attrs:{text:"dictionary"}})],1),t._v(" "),s("p",[t._v("This form defines a homogenous dictionary where the values of members satisfy a given schema.")]),t._v(" "),s("p",[t._v("It has a required member "),s("code",[t._v("values")]),t._v(" (schema that member values should satisfy) and optional members "),s("code",[t._v("nullable")]),t._v(" and "),s("code",[t._v("metadata")]),t._v(", no other members are allowed.")]),t._v(" "),s("p",[t._v("Unlike JSON Schema, the data instance must be JSON object (without using additional "),s("code",[t._v("type")]),t._v(" keyword), and there is no way to enforce size restrictions.")]),t._v(" "),s("p",[s("strong",[t._v("Example")])]),t._v(" "),s("p",[t._v("Schema:")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  values"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"uint8"')]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("Valid data: "),s("code",[t._v("{}")]),t._v(", "),s("code",[t._v('{"foo": 1}')]),t._v(", "),s("code",[t._v('{"foo": 1, "bar": 2}')])]),t._v(" "),s("p",[t._v("Invalid data: "),s("code",[t._v('{"foo": "bar"}')]),t._v(", any type other than object")]),t._v(" "),s("h3",{attrs:{id:"ref-form"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ref-form"}},[t._v("#")]),t._v(" Ref form "),s("Badge",{attrs:{text:"reference definitions"}})],1),t._v(" "),s("p",[t._v("This form defines a reference to the schema that is present in the corresponding key in the "),s("code",[t._v("definitions")]),t._v(" member of the root schema.")]),t._v(" "),s("p",[t._v("It has a required member "),s("code",[t._v("ref")]),t._v(" (member of "),s("code",[t._v("definitions")]),t._v(" object in the root schema) and optional members "),s("code",[t._v("nullable")]),t._v(" and "),s("code",[t._v("metadata")]),t._v(", no other members are allowed.")]),t._v(" "),s("p",[t._v("Unlike JSON Schema, JTD does not allow to reference:")]),t._v(" "),s("ul",[s("li",[t._v("any schema fragment other than root level "),s("code",[t._v("definitions")]),t._v(" member")]),t._v(" "),s("li",[t._v("root of the schema - there is another way to define a self-recursive schema (see Example 2)")]),t._v(" "),s("li",[t._v("another schema file (but you can still combine schemas from multiple files using JavaScript).")])]),t._v(" "),s("p",[s("strong",[t._v("Example 1.")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  properties"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    propFoo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ref"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"foo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nullable"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  definitions"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    foo"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("strong",[t._v("Example 2: self-referencing schema for binary tree")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ref"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tree"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  definitions"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    tree"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      properties"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        value"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"int32"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      optionalProperties"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        left"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ref"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tree"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        right"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ref"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"tree"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[s("strong",[t._v("Example 3: invalid schema (missing reference)")])]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  ref"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"foo"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  definitions"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    bar"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"empty-form"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#empty-form"}},[t._v("#")]),t._v(" Empty form "),s("Badge",{attrs:{text:"any data"}})],1),t._v(" "),s("p",[t._v("Empty JTD schema defines the data instance that can be of any type, including JSON "),s("code",[t._v("null")]),t._v(" (even if "),s("code",[t._v("nullable")]),t._v(" member is not present). It cannot have any member other than "),s("code",[t._v("nullable")]),t._v(" and "),s("code",[t._v("metadata")]),t._v(".")]),t._v(" "),s("h2",{attrs:{id:"jtdschematype"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jtdschematype"}},[t._v("#")]),t._v(" JTDSchemaType")]),t._v(" "),s("p",[t._v("The type "),s("code",[t._v("JTDSchemaType")]),t._v(" can be used to validate that the written schema matches the type you expect to validate. This type is strict such that if typescript compiles, you should require no further type guards. The downside of this is that the types that "),s("code",[t._v("JTDSchemaType")]),t._v(" can verify are limited to the types that JTD can verify. If a type doesn't verify, "),s("code",[t._v("JTDSchemaType")]),t._v(" should resolve to "),s("code",[t._v("never")]),t._v(", throwing an error when you try to assign to it. This means that types like "),s("code",[t._v("1 | 2 | 3")]),t._v(", or general untagged unions (outside of unions of string literals) cannot be used with "),s("code",[t._v("JTDSchemaType")]),t._v(".")]),t._v(" "),s("h3",{attrs:{id:"most-schemas"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#most-schemas"}},[t._v("#")]),t._v(" Most Schemas")]),t._v(" "),s("p",[t._v("Most straightforward types should work with "),s("code",[t._v("JTDSchemaType")]),t._v(", e.g.")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("interface")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("MyType")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  num"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),t._v("\n  optionalStr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),t._v("\n  nullableEnum"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"v1.0"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"v1.2"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\n  values"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Record"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" schema"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" JTDSchemaType"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("MyType"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  properties"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    num"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"float64"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    nullableEnum"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"v1.0"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"v1.2"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nullable"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    values"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("values"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"int32"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  optionalProperties"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    optionalStr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"string"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("will compile. Using "),s("code",[t._v("schema")]),t._v(" with AJV will guarantee type safety.")]),t._v(" "),s("h3",{attrs:{id:"ref-schemas"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#ref-schemas"}},[t._v("#")]),t._v(" Ref Schemas")]),t._v(" "),s("p",[t._v("Ref schemas are a little more advanced, because the types of every definition must be specified in advance.\nA simple ref schema is relatively straightforward:")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" schema"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" JTDSchemaType"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("val"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("num"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  definitions"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    num"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"float64"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  properties"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    val"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ref"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"num"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("p",[t._v("note that the type of all definitions was included as a second argument to "),s("code",[t._v("JTDSchemaType")]),t._v(".")]),t._v(" "),s("p",[t._v("This also works for recursive schemas:")]),t._v(" "),s("div",{staticClass:"language-typescript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-typescript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("LinkedList")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("val"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("number")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" next"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" LinkedList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" schema"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" JTDSchemaType"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("LinkedList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("node"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" LinkedList"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  definitions"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    node"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      properties"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        val"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("type"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"float64"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      optionalProperties"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        next"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ref"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  ref"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h3",{attrs:{id:"notable-omissions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#notable-omissions"}},[t._v("#")]),t._v(" Notable Omissions")]),t._v(" "),s("p",[s("code",[t._v("JTDSchemaType")]),t._v(" currently validates that if the schema compiles it will verify an accurate type, but there are a few places with potentially unexpected behavior.\n"),s("code",[t._v("JTDSchemaType")]),t._v(" doesn't verify the schema is correct. It won't reject schemas that definitions anywhere by the root, and it won't reject discriminator schemas that still define the descriminator in mapping properties. It also won't verify that enum schemas have every enum member as this isn't generally feasible in typescript yet.")]),t._v(" "),s("h2",{attrs:{id:"extending-jtd"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#extending-jtd"}},[t._v("#")]),t._v(" Extending JTD")]),t._v(" "),s("h3",{attrs:{id:"metadata-schema-member"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#metadata-schema-member"}},[t._v("#")]),t._v(" Metadata schema member")]),t._v(" "),s("p",[t._v("Each schema form may have an optional member "),s("code",[t._v("metadata")]),t._v(" that JTD reserves for implementation/application specific extensions. Ajv uses this member as a location where any non-standard keywords can be used, such as:")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("union")]),t._v(" keyword included in Ajv")]),t._v(" "),s("li",[t._v("any user-defined keywords, for example keywords defined in "),s("a",{attrs:{href:"https://github.com/ajv-validator/ajv-keywords",target:"_blank",rel:"noopener noreferrer"}},[t._v("ajv-keywords"),s("OutboundLink")],1),t._v(" package")]),t._v(" "),s("li",[t._v("JSON Schema keywords, as long as their names are different from standard JTD keywords. It can be used to enable a gradual migration from JSON Schema to JTD, should it be required.")])]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("Extensions are non-portable")]),t._v(" "),s("p",[t._v("Ajv-specific extension to JTD are likely to be unsupported by other tools, so while it may simplify adoption, it undermines the cross-platform objective of using JTD. While it is ok to put some human readable information in "),s("code",[t._v("metadata")]),t._v(" member, it is recommended not to add any validation logic there (even if it is supported by Ajv).")])]),t._v(" "),s("p",[t._v("Additional restrictions that Ajv enforces on "),s("code",[t._v("metadata")]),t._v(" schema member:")]),t._v(" "),s("ul",[s("li",[t._v("you cannot use standard JTD keywords there. While strictly speaking it is allowed by the specification, these keywords should be ignored inside "),s("code",[t._v("metadata")]),t._v(" - the general approach of Ajv is to avoid anything that is ignored.")]),t._v(" "),s("li",[t._v("you need to define all members used in "),s("code",[t._v("metadata")]),t._v(" as keywords. If they are no-op it can be done with "),s("code",[t._v('ajv.addKeyword("my-metadata-keyword")')]),t._v(". This restriction can be removed by disabling "),s("a",{attrs:{href:"https://github.com/ajv-validator/ajv/blob/master/docs/strict-mode.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("strict mode"),s("OutboundLink")],1),t._v(", without affecting the strictness of JTD - unknown keywords would still be prohibited in the schema itself.")])]),t._v(" "),s("h3",{attrs:{id:"union-keyword"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#union-keyword"}},[t._v("#")]),t._v(" Union keyword")]),t._v(" "),s("p",[t._v("Ajv defines "),s("code",[t._v("union")]),t._v(" keyword that is used in the schema that validates JTD schemas ("),s("a",{attrs:{href:"https://github.com/ajv-validator/ajv/blob/master/lib/refs/jtd-schema.ts",target:"_blank",rel:"noopener noreferrer"}},[t._v("meta-schema"),s("OutboundLink")],1),t._v(").")]),t._v(" "),s("p",[t._v("This keyword can be used only inside "),s("code",[t._v("metadata")]),t._v(" schema member.")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("Union keyword is non-portable")]),t._v(" "),s("p",[t._v("This keyword is non-standard and it is not supported in other JTD tools, so it is recommended NOT to use this keyword in schemas for your data if you want them to be cross-platform.")])]),t._v(" "),s("h3",{attrs:{id:"user-defined-keywords"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#user-defined-keywords"}},[t._v("#")]),t._v(" User-defined keywords")]),t._v(" "),s("p",[t._v("Any user-defined keywords that can be used in JSON Schema schemas can also be used in JTD schemas, including the keywords in "),s("a",{attrs:{href:"https://github.com/ajv-validator/ajv-keywords",target:"_blank",rel:"noopener noreferrer"}},[t._v("ajv-keywords"),s("OutboundLink")],1),t._v(" package.")]),t._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[t._v("User-defined keywords are non-portable")]),t._v(" "),s("p",[t._v("It is strongly recommended to only use it to simplify migration from JSON Schema to JTD and not to use non-standard keywords in the new schemas, as these keywords are not supported by any other tools.")])]),t._v(" "),s("h2",{attrs:{id:"validation-errors"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#validation-errors"}},[t._v("#")]),t._v(" Validation errors")]),t._v(" "),s("p",[t._v("TODO")])],1)}),[],!1,null,null,null);a.default=n.exports}}]);